# Docker稳定性测试

## 摘要

Docker作为操作系统级虚拟化技术，由于轻量、快速起停、易于打包分发等特性，已被广泛应用。本文从功能、性能两个维度，对Docker的可靠性和性能进行测试，旨在评估Docker是否能够实现企业级应用。

## 测试目标

- Docker 1.8.1
- Swarm
- Registry v1

## 测试目的

- 功能测试
- cpu、mem、disk、network压力测试
- 并发性能测试

## 测试工具

- cpu、mem、disk压力测试工具 : nstress
- network : rsync, ping
- 并发测试工具 ：locust
- 限速工具： cgroup

## 测试用例及测试计划

```
用例数目	测试类型	成功率	备注
42	     功能	     92.8%	测试Docker主机
42	     功能	     90.5%	测试swarm集群
6	      并发	     N/A
12	     性能	     N/A


```

参见以下文档：
- Docker稳定性测试计划
- 测试案例(含测试脚本)

## 测试结果

```
缺陷号	缺陷标题	缺陷类型	缺陷严重性	缺陷状态
Bug1	在并发停止容器时出现部分容器无法检索到导致停止请求失败	性能	主要	打开
Bug2	在删除容器的过程中创建容器的操作会非常缓慢	性能	主要	打开
Bug3	进行50个容器写请求操作导致大部分数据无法从cache中sync到硬盘，且无法进行容器创建关闭等操作	性能	主要	打开
Bug4	插入"key": "value"键值对格式的无效参数，容器也意外被创建	功能	主要	打开
Bug5	仓库镜像搜索功能不可用	功能	主要	关闭
Bug6	使用curl发送请求到swarm主机，调用/containers/create创建容器，部分参数不能被成功解析而创建失败	功能	主要	打开
```

参见：

- Docker稳定性测试报告
